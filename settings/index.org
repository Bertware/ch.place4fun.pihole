<!DOCTYPE html>
<html>
<head>
    <!-- Die '/homey.js'-Datei muss in Ihrer Einstellungsansicht eingebunden sein, um zu funktionieren -->
    <script
        type="text/javascript"
        src="/homey.js"
        data-origin="settings"
    ></script>

    <style>
        /* Allgemeine Stile für das Layout der Homey-App */
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .full-width-button {
           width: 100%;
        }

        h1 {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table th,
        table td {
            padding: 10px;
            text-align: left;
        }

        table th {
            background-color: #f0f0f0;
            font-weight: bold;
        }

        /* Stil für den "Speichern"-Button */
        button {
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
            margin: 0 auto;
        }

        button:hover {
            background-color: #0056b3;
        }

        #success-message {
        color: green;
        font-weight: bold;
        margin-top: 20px;
        text-align: center;
        position: fixed;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
        padding: 20px;
        background-color: #fff;
        border-radius: 5px;
        width: 80%;
        max-width: 400px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
       
    </style>
    
    <script>
        // Funktion zum Speichern der Einstellungen
        function saveSettings() {
        // Hier den Code zum Speichern der Einstellungen einfügen
        // Beispiel: HomeyAPI.ManagerSettings.set("parameter_name", "parameter_value");

        // Erfolgsmeldung anzeigen
          var successMessage = document.getElementById("success-message");
          successMessage.style.display = "block";

          // Eingabefelder schreibgeschützt machen
          var inputFields = document.getElementsByTagName("input");
          for (var i = 0; i < inputFields.length; i++) {
          inputFields[i].readOnly = true;
          }
      }

// Add clearInstance function
function clearInstance(instanceNumber) {
    var confirmation = confirm('Möchten Sie diese Instanz wirklich löschen?');

    if (confirmation) {
        var urlElement = document.getElementById(`Instance${instanceNumber}_URL`);
        var portElement = document.getElementById(`Instance${instanceNumber}_PORT`);
        var apiElement = document.getElementById(`Instance${instanceNumber}_API`);

        urlElement.value = '';
        portElement.value = '';
        apiElement.value = '';

        Homey.set(`Instance${instanceNumber}_URL`, '', function (err) {
          if (err) return Homey.alert(err);
        });

        Homey.set(`Instance${instanceNumber}_PORT`, '', function (err) {
          if (err) return Homey.alert(err);
        });

        Homey.set(`Instance${instanceNumber}_API`, '', function (err) {
          if (err) return Homey.alert(err);
        });
    }
}

</script>
</head>
<body>
  <div class="container">
    
        <table>
          <tr>
            <th colspan="2" data-i18n="settings.instance_hint_urls"></th>
        </tr>
        </table>
        <table>
            <tr>
                <th colspan="2" data-i18n="settings.instance1_title"></th>
           </tr>
            <tr>
                <td data-i18n="settings.instance1_url"></td>
                <td><input type="text" id="Instance1_URL"></td>
            </tr>
           <tr>
                <td data-i18n="settings.instance1_port"></td>
                <td><input type="number" id="Instance1_PORT"></td>
            </tr>
            <tr>
                <td data-i18n="settings.instance1_api"></td>
                <td><input type="text" id="Instance1_API"></td>
            </tr>
            <table>
              <tr>
                  <td><button class="full-width-button" onclick="clearInstance(1)" data-i18n="settings.delete_instance_title"></button></td>
              </tr>
          </table>

        <table>
            <tr>
              <th colspan="2" data-i18n="settings.instance2_title"></th>
            </tr>
            <tr>
                <td data-i18n="settings.instance2_url"></td>
                <td><input type="text" id="Instance2_URL"></td>
            </tr>
            <tr>
                <td data-i18n="settings.instance2_port"></td>
                <td><input type="number" id="Instance2_PORT"></td>
            </tr>
            <tr>
              <td data-i18n="settings.instance2_api"></td>
                <td><input type="text" id="Instance2_API"></td>
            </tr>
        </table>
        <table>
          <tr>
              <td><button class="full-width-button" onclick="clearInstance(1)" data-i18n="settings.delete_instance_title"></button></td>
          </tr>
        </table>


        <table>
            <tr>
              <th colspan="2" data-i18n="settings.instance3_title"></th>
            </tr>
            <tr>
                <td data-i18n="settings.instance3_url"></td>
                <td><input type="text" id="Instance3_URL"></td>
            </tr>
            <tr>
                <td data-i18n="settings.instance3_port"></td>
                <td><input type="number" id="Instance3_PORT"></td>
            </tr>
            <tr>
                <td data-i18n="settings.instance3_api"></td>
                <td><input type="text" id="Instance3_API"></td>
            </tr>
        </table>
        <table>
          <tr>
              <td><button class="full-width-button" onclick="clearInstance(1)" data-i18n="settings.delete_instance_title"></button></td>
          </tr>
        </table>


        <table>
          <tr>
            <th colspan="2" data-i18n="settings.instance4_title"></th>
          </tr>
          <tr>
              <td data-i18n="settings.instance4_url"></td>
              <td><input type="text" id="Instance4_URL"></td>
          </tr>
          <tr>
              <td data-i18n="settings.instance4_port"></td>
              <td><input type="number" id="Instance4_PORT"></td>
          </tr>
          <tr>
              <td data-i18n="settings.instance4_api"></td>
              <td><input type="text" id="Instance4_API"></td>
          </tr>
      </table>
      <table>
        <tr>
            <td><button class="full-width-button" onclick="clearInstance(1)" data-i18n="settings.delete_instance_title"></button></td>
        </tr>
      </table>


      <table>
        <tr>
          <th colspan="2" data-i18n="settings.information_about_pihole"></th>
      </tr>
      </table>

      <div class="container">
        <button id="save" onclick="saveSettings()" data-i18n="settings.savebutton_title"></button>
        <div id="success-message" style="display: none;" data-i18n="settings.savebutton_confirmation">
        </div>
      </div>


    <script type="text/javascript">
      // a method named 'onHomeyReady' must be present in your code
      function onHomeyReady(Homey) {
        // Tell Homey we're ready to be displayed
        Homey.ready();

        var instance1_URL_Element = document.getElementById("Instance1_URL");
        var instance1_PORT_Element = document.getElementById("Instance1_PORT");
        var instance1_API_Element = document.getElementById("Instance1_API");

        var instance2_URL_Element = document.getElementById("Instance2_URL");
        var instance2_PORT_Element = document.getElementById("Instance2_PORT");
        var instance2_API_Element = document.getElementById("Instance2_API");
        
        var instance3_URL_Element = document.getElementById("Instance3_URL");
        var instance3_PORT_Element = document.getElementById("Instance3_PORT");
        var instance3_API_Element = document.getElementById("Instance3_API");

        var instance4_URL_Element = document.getElementById("Instance4_URL");
        var instance4_PORT_Element = document.getElementById("Instance4_PORT");
        var instance4_API_Element = document.getElementById("Instance4_API");

        var saveElement = document.getElementById("save");

        Homey.get("Instance1_URL", function (err, Instance1_URL) {
          if (err) return Homey.alert(err);
          instance1_URL_Element.value = Instance1_URL;
        });

        Homey.get("Instance1_PORT", function (err, Instance1_PORT) {
          if (err) return Homey.alert(err);
          instance1_PORT_Element.value = Instance1_PORT;
        });

        Homey.get("Instance1_API", function (err, Instance1_API) {
          if (err) return Homey.alert(err);
          instance1_API_Element.value = Instance1_API;
        });

        Homey.get("Instance2_URL", function (err, Instance2_URL) {
          if (err) return Homey.alert(err);
          instance2_URL_Element.value = Instance2_URL;
        });

        Homey.get("Instance2_PORT", function (err, Instance2_PORT) {
          if (err) return Homey.alert(err);
          instance2_PORT_Element.value = Instance2_PORT;
        });

        Homey.get("Instance2_API", function (err, Instance2_API) {
          if (err) return Homey.alert(err);
          instance2_API_Element.value = Instance2_API;
        });

        Homey.get("Instance3_URL", function (err, Instance3_URL) {
          if (err) return Homey.alert(err);
          instance3_URL_Element.value = Instance3_URL;
        });

        Homey.get("Instance3_PORT", function (err, Instance3_PORT) {
          if (err) return Homey.alert(err);
          instance3_PORT_Element.value = Instance3_PORT;
        });

        Homey.get("Instance3_API", function (err, Instance3_API) {
          if (err) return Homey.alert(err);
          instance3_API_Element.value = Instance3_API;
        });

        Homey.get("Instance4_URL", function (err, Instance4_URL) {
          if (err) return Homey.alert(err);
          instance4_URL_Element.value = Instance4_URL;
        });

        Homey.get("Instance4_PORT", function (err, Instance4_PORT) {
          if (err) return Homey.alert(err);
          instance4_PORT_Element.value = Instance4_PORT;
        });

        Homey.get("Instance4_API", function (err, Instance4_API) {
          if (err) return Homey.alert(err);
          instance4_API_Element.value = Instance4_API;
        });

        saveElement.addEventListener("click", function (e) {

          Homey.set("Instance1_URL", instance1_URL_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance1_PORT", instance1_PORT_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance1_API", instance1_API_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });


          Homey.set("Instance2_URL", instance2_URL_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance2_PORT", instance2_PORT_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance2_API", instance2_API_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });


          Homey.set("Instance3_URL", instance3_URL_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance3_PORT", instance3_PORT_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance3_API", instance3_API_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });


          Homey.set("Instance4_URL", instance4_URL_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance4_PORT", instance4_PORT_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

          Homey.set("Instance4_API", instance4_API_Element.value, function (err) {
            if (err) return Homey.alert(err);
          });

        });
    }

</script>
  </body>
</html>

